<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tommaso Cal√≤ | Linktree</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img.png" />
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <!-- Core theme CSS -->
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <!-- Parallax Pixel Background Animation -->
    <section class="animated-background">
      <div id="stars1"></div>
      <div id="stars2"></div>
      <div id="stars3"></div>
    </section>
    <!-- End of Parallax Pixel Background Animation -->

    <a id="profilePicture" href="#popup">
      <img src="img.png" alt="Profile Picture">
    </a>



    <div id="userName">
      @tommasocalo
    </div>

    <div id="links">

      <a class="link" href="https://www.last.fm/user/tommasocalo" target="_blank">
        <i class="fas fa-music">&nbsp;</i>Music
      </a>
      <a class="link" href="https://letterboxd.com/tommasocalo/" target="_blank">
        <i class="fas fa-film">&nbsp;</i>Movies
      </a>
      <a class="link" href="https://www.goodreads.com/user/show/188174383-tommaso-cal" target="_blank">
        <i class="fas fa-book">&nbsp;</i>Books
      </a>
      <a class="link" href="https://www.strava.com/athletes/48764799" target="_blank">
        <i class="fas fa-running">&nbsp;</i>Sport
      </a>
      <a class="link" href="https://tommasocalo.github.io/" target="_blank">
        <i class="fas fa-briefcase">&nbsp;</i>Research
      </a>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      let isDragging = false;
      let lastX, lastY;
      const trailElements = [];
      const maxTrailLength = 15; // Number of particles in the comet trail
      
      // Prevent page scrolling with CSS
      document.body.style.overflow = 'hidden';
      document.body.style.position = 'fixed';
      document.body.style.width = '100%';
      document.body.style.height = '100%';
      
      // Touch start event
      document.addEventListener('touchstart', function(e) {
        isDragging = true;
        lastX = e.touches[0].clientX;
        lastY = e.touches[0].clientY;
        
        // Create the comet head
        createCometParticle(lastX, lastY, 1);
        
        // Prevent default touch behavior
        e.preventDefault();
      }, { passive: false }); // This is critical to make preventDefault work
      
      // Touch move event with physics
      document.addEventListener('touchmove', function(e) {
        if (!isDragging) return;
        
        const currentX = e.touches[0].clientX;
        const currentY = e.touches[0].clientY;
        
        // Calculate velocity (speed and direction)
        const dx = currentX - lastX;
        const dy = currentY - lastY;
        const speed = Math.sqrt(dx*dx + dy*dy);
        
        // Only create particles if moving fast enough
        if (speed > 3) {
          // Create a particle with size based on speed
          const sizeMultiplier = Math.min(speed / 10, 1.5);
          createCometParticle(currentX, currentY, sizeMultiplier);
          
          // For faster movements, create intermediate particles to fill gaps
          if (speed > 20) {
            const steps = Math.floor(speed / 10);
            for (let i = 1; i < steps; i++) {
              const ratio = i / steps;
              const interpX = lastX + dx * ratio;
              const interpY = lastY + dy * ratio;
              createCometParticle(interpX, interpY, sizeMultiplier * (1 - ratio * 0.5));
            }
          }
        }
        
        // Update last position
        lastX = currentX;
        lastY = currentY;
        
        // Remove old particles if we have too many
        while (trailElements.length > maxTrailLength) {
          const oldestParticle = trailElements.shift();
          if (oldestParticle && oldestParticle.parentNode) {
            oldestParticle.parentNode.removeChild(oldestParticle);
          }
        }
        
        // Prevent scrolling
        e.preventDefault();
      }, { passive: false }); // This is critical to make preventDefault work
      
      // Touch end event
      document.addEventListener('touchend', function() {
        isDragging = false;
        
        // Fade out and remove all trail elements
        trailElements.forEach((element, index) => {
          setTimeout(() => {
            element.style.opacity = '0';
            setTimeout(() => {
              if (element.parentNode) {
                element.parentNode.removeChild(element);
              }
            }, 500);
          }, index * 30); // Staggered fade-out for comet trail effect
        });
        
        // Clear the array
        trailElements.length = 0;
      });
      
      // Function to create a comet particle
      function createCometParticle(x, y, scale) {
        const particle = document.createElement('div');
        particle.classList.add('comet-particle');
        
        // Set position
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        
        // Set size based on position in the trail
        const size = 15 * scale;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        
        // Add to body
        document.body.appendChild(particle);
        
        // Add to our trail array
        trailElements.push(particle);
        
        // Apply different styles to trail particles
        trailElements.forEach((elem, index) => {
          const opacity = 1 - (index / maxTrailLength);
          const particleSize = size - (index * (size / maxTrailLength));
          
          elem.style.opacity = opacity.toString();
          elem.style.width = particleSize + 'px';
          elem.style.height = particleSize + 'px';
          elem.style.boxShadow = `0 0 ${10 + particleSize}px rgba(255, 255, 255, ${opacity * 0.8})`;
        });
      }
    });
    </script>
    
  </body>
</html>
