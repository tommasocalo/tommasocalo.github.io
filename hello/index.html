<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tommaso Cal√≤ | Linktree</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img.png" />
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <!-- Core theme CSS -->
    <link rel="stylesheet" href="style.css">
    <style>
      /* Instagram browser compatibility styles */
      html, body {
        position: fixed !important;
        overflow: hidden !important;
        width: 100% !important;
        height: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        touch-action: manipulation !important;
        -webkit-overflow-scrolling: none !important;
        overscroll-behavior: none !important;
        -webkit-user-select: none !important;
      }
      
      .comet-particle {
        position: absolute;
        pointer-events: none;
        background: radial-gradient(circle at center, rgba(255, 255, 255, 1) 0%, rgba(120, 190, 255, 0.6) 70%, transparent 100%);
        border-radius: 50%;
        z-index: 1000;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 30px rgba(70, 131, 255, 0.4);
        transition: opacity 0.5s ease;
      }
      
      /* Extra fix for Instagram browser */
      body * {
        touch-action: manipulation !important;
      }
    </style>
  </head>

  <body ontouchmove="event.preventDefault();">
    <!-- Parallax Pixel Background Animation -->
    <section class="animated-background">
      <div id="stars1"></div>
      <div id="stars2"></div>
      <div id="stars3"></div>
    </section>
    <!-- End of Parallax Pixel Background Animation -->

    <a id="profilePicture" href="#popup">
      <img src="img.png" alt="Profile Picture">
    </a>

    <div id="userName">
      @tommasocalo
    </div>

    <div id="links">
      <a class="link" href="https://www.last.fm/user/tommasocalo" target="_blank">
        <i class="fas fa-music">&nbsp;</i>Music
      </a>
      <a class="link" href="https://letterboxd.com/tommasocalo/" target="_blank">
        <i class="fas fa-film">&nbsp;</i>Movies
      </a>
      <a class="link" href="https://www.goodreads.com/user/show/188174383-tommaso-cal" target="_blank">
        <i class="fas fa-book">&nbsp;</i>Books
      </a>
      <a class="link" href="https://www.strava.com/athletes/48764799" target="_blank">
        <i class="fas fa-running">&nbsp;</i>Sport
      </a>
      <a class="link" href="https://tommasocalo.github.io/" target="_blank">
        <i class="fas fa-briefcase">&nbsp;</i>Research
      </a>
    </div>
    
    <script>
      // Instagram browser compatible version
      window.onload = function() {
        // Force initial scroll position
        window.scrollTo(0, 0);
        
        let isDragging = false;
        let lastX, lastY;
        const trailElements = [];
        const maxTrailLength = 15;
        
        // Multiple approaches to prevent scrolling
        document.ontouchmove = function(e) { 
          e.preventDefault(); 
        };
        
        document.documentElement.style.overflow = 'hidden';
        document.body.style.overflow = 'hidden';
        document.documentElement.style.position = 'fixed';
        document.body.style.position = 'fixed';
        
        // Listen for all events that might cause scrolling
        const events = ['touchstart', 'touchmove', 'touchend', 'touchcancel', 
                        'wheel', 'mousewheel'];
        
        events.forEach(function(event) {
          window.addEventListener(event, function(e) {
            e.preventDefault();
          }, { passive: false });
          
          document.addEventListener(event, function(e) {
            e.preventDefault();
          }, { passive: false });
        });
        
        // Touch start event
        document.addEventListener('touchstart', function(e) {
          isDragging = true;
          lastX = e.touches[0].clientX;
          lastY = e.touches[0].clientY;
          
          createCometParticle(lastX, lastY, 1);
          
          e.preventDefault();
        }, { passive: false });
        
        // Touch move event
        document.addEventListener('touchmove', function(e) {
          if (!isDragging) return;
          
          const currentX = e.touches[0].clientX;
          const currentY = e.touches[0].clientY;
          
          const dx = currentX - lastX;
          const dy = currentY - lastY;
          const speed = Math.sqrt(dx*dx + dy*dy);
          
          if (speed > 3) {
            const sizeMultiplier = Math.min(speed / 10, 1.5);
            createCometParticle(currentX, currentY, sizeMultiplier);
            
            if (speed > 20) {
              const steps = Math.floor(speed / 10);
              for (let i = 1; i < steps; i++) {
                const ratio = i / steps;
                const interpX = lastX + dx * ratio;
                const interpY = lastY + dy * ratio;
                createCometParticle(interpX, interpY, sizeMultiplier * (1 - ratio * 0.5));
              }
            }
          }
          
          lastX = currentX;
          lastY = currentY;
          
          while (trailElements.length > maxTrailLength) {
            const oldestParticle = trailElements.shift();
            if (oldestParticle && oldestParticle.parentNode) {
              oldestParticle.parentNode.removeChild(oldestParticle);
            }
          }
          
          e.preventDefault();
        }, { passive: false });
        
        // Touch end event
        document.addEventListener('touchend', function() {
          isDragging = false;
          
          trailElements.forEach(function(element, index) {
            setTimeout(function() {
              element.style.opacity = '0';
              setTimeout(function() {
                if (element.parentNode) {
                  element.parentNode.removeChild(element);
                }
              }, 500);
            }, index * 30);
          });
          
          trailElements.length = 0;
        });
        
        // Function to create a comet particle
        function createCometParticle(x, y, scale) {
          const particle = document.createElement('div');
          particle.classList.add('comet-particle');
          
          particle.style.left = x + 'px';
          particle.style.top = y + 'px';
          
          const size = 15 * scale;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          
          document.body.appendChild(particle);
          trailElements.push(particle);
          
          trailElements.forEach(function(elem, index) {
            const opacity = 1 - (index / maxTrailLength);
            const particleSize = size - (index * (size / maxTrailLength));
            
            elem.style.opacity = opacity.toString();
            elem.style.width = particleSize + 'px';
            elem.style.height = particleSize + 'px';
            elem.style.boxShadow = '0 0 ' + (10 + particleSize) + 'px rgba(255, 255, 255, ' + (opacity * 0.8) + ')';
          });
        }
        
        // Extra fixes for Instagram browser
        function preventScroll() {
          window.scrollTo(0, 0);
        }
        
        // Apply frequently to keep page from scrolling
        setInterval(preventScroll, 100);
        
        // Also try to use older event bindings for maximum compatibility
        window.onscroll = preventScroll;
      };
    </script>
  </body>
</html>